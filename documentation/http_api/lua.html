---
layout: default
title: HTTP API - Lua
---
<section class="hero">
    <div class="hero-body">
        <p class="title">
            HTTP API
        </p>
        <p class="subtitle">
            Lua
        </p>
    </div>
</section>

<section class="section">
    <article class="message is-primary">
        <div class="message-header">
            <p>Get the Neighbors of a Node By Node Type</p>
        </div>
        <div class="message-body is-dark">
            <p>Retrieve the neighbors an existing node has by type and key</p>
            <pre><code class="language-html">:POST db/{graph}/lua</code></pre>
            <p>Example Request:</p>
            <pre><code class="language-html">:POST /db/rage/lua Request Body: "script"</code></pre>
            The script must end in one or more values that will be returned in JSON format inside an Array.
            Within the script the user can access to graph functions. For example:
            <pre><code class="language-javascript">
a = NodeGetId("Node","Max")
b = NodeTypesGetCount()
c = NodeTypesGetCountByType("Node")
d = NodePropertyGet("Node", "Max", "name")
e = NodePropertyGetById(a, "name")
a, b, c, d, e</code></pre>
            <p>Another example to get the names of the nodes related to Node Max:</p>
            <pre><code class="language-javascript">
names = {}
ids = NodeGetRelationshipsIds("Node", "Max")
for k=1,#ids do
    v = ids[k]
    table.insert(names, NodePropertyGetById(v.node_id, "name"))
end
names</code></pre>
        </div>
    </article>
</section>